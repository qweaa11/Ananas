<?xml version="1.0" encoding="UTF-8"?>
<!-- ===== #28. mapper 기본 설정 ===== -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- ===== #29. 루트 엘리먼트 및 네임스페이스 설정하기(이 네임스페이스의 이름은 프로젝트 전체 내에서 반드시 고유해야만 한다.) ===== --> 
<mapper namespace="jgh">
	<select id="findAllMember" resultType="com.spring.bookmanage.member.JGHmodel.MemberVO">
		select name, memberid
		    , case when func_age(birth)<![CDATA[<]]>14 then '아동'
		    when func_age(birth)<![CDATA[<]]>20 then '청소년'
		    else '성인' end as ages, gender
		    , email, phone, status
		    , to_char(regDate,'yyyy-mm-dd') as regDate
		from member
	</select>
	
	<select id="findAllMemberBySearchWord" parameterType="HashMap" resultType="com.spring.bookmanage.member.JGHmodel.MemberVO">
		select name, memberid
		    , case when func_age(birth)<![CDATA[<]]>14 then '아동'
		    when func_age(birth)<![CDATA[<]]>20 then '청소년'
		    else '성인' end as ages, gender
		    , email, phone, status
		    , , to_char(regDate,'yyyy-mm-dd') as regDate
		from member
		where ${colname} like '%'||#{searchWord}||'%'
	</select>
</mapper>